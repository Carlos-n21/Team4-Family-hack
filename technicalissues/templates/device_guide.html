{% extends 'base.html' %}
{% load static %}
{% block content %}

<section class="device-guide-page">
    <div class="container py-5">
        <!-- Back navigation -->
        <div class="row mb-4">
            <div class="col-12">
                <a href="{% url 'technicalissues' %}" class="text-decoration-none back-link">
                    <i class="fa-solid fa-arrow-left me-2"></i> Back to devices
                </a>
            </div>
        </div>
        
        <!-- Device header -->
        <div class="row mb-5">
            <div class="col-12">
                <div class="device-header bg-white p-4 rounded-4 shadow-sm d-flex align-items-center">
                    <img src="{% static 'images/'|add:device_info.icon %}" alt="{{ device_info.name }} icon" class="device-icon me-4">
                    <div>
                        <h1 class="mb-1">{{ device_info.name }}</h1>
                        <p class="text-muted mb-0">{{ device_info.description }}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Guide Toggle -->
        <div class="row mb-4">
            <div class="col-md-6 mx-auto">
                <div class="toggle-container rounded-pill shadow-sm">
                    <div class="toggle-switch" id="guide-toggle">
                        <button class="toggle-btn active" data-target="how-to">
                            <i class="fa-solid fa-book-open me-2"></i> 'How to' guides
                        </button>
                        <button class="toggle-btn" data-target="troubleshoot">
                            <i class="fa-solid fa-wrench me-2"></i> Troubleshooting
                        </button>
                        <span class="toggle-indicator"></span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- MOBILE GUIDES -->
        {% if device_type == 'mobile' %}
            <div class="guide-section how-to-section" id="how-to">
                <div class="row">
                    <!-- Connect to Wi-Fi -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#wifi-guide-mobile">
                                <div class="icon-container">
                                    <i class="fa-solid fa-wifi"></i>
                                </div>
                                <h3>Connect to Wi-Fi</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="wifi-guide-mobile">
                                <ol class="steps-list">
                                    <li>Open the <strong>Settings</strong> app.</li>
                                    <li>Tap <strong>Wi-Fi</strong> and turn it on.</li>
                                    <li>Select your network and enter the password.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Change brightness -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#brightness-guide-mobile">
                                <div class="icon-container">
                                    <i class="fa-solid fa-sun"></i>
                                </div>
                                <h3>Change Screen Brightness</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="brightness-guide-mobile">
                                <ol class="steps-list">
                                    <li>Swipe down from the top of your screen.</li>
                                    <li>Move the brightness slider left/right.</li>
                                    <li>Or go to <strong>Settings</strong> &gt; <strong>Display</strong>.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Set an alarm -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#alarm-guide-mobile">
                                <div class="icon-container">
                                    <i class="fa-solid fa-bell"></i>
                                </div>
                                <h3>Set an Alarm</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="alarm-guide-mobile">
                                <ol class="steps-list">
                                    <li>Open the <strong>Clock</strong> app.</li>
                                    <li>Tap <strong>Alarm</strong>, then the <strong>+</strong> icon.</li>
                                    <li>Set the time and save.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="guide-section troubleshoot-section d-none" id="troubleshoot">
                <div class="row">
                    <!-- Sound not working -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#sound-mobile">
                                <div class="icon-container">
                                    <i class="fa-solid fa-volume-xmark"></i>
                                </div>
                                <h3>Sound Not Working</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="sound-mobile">
                                <ol class="steps-list">
                                    <li>Check the volume and mute settings.</li>
                                    <li>Try headphones and different apps.</li>
                                    <li>Restart your phone.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Bluetooth not connecting -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#bluetooth-mobile">
                                <div class="icon-container">
                                    <i class="fa-brands fa-bluetooth"></i>
                                </div>
                                <h3>Bluetooth Not Connecting</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="bluetooth-mobile">
                                <ol class="steps-list">
                                    <li>Turn Bluetooth off and back on.</li>
                                    <li>Forget and re-pair the device.</li>
                                    <li>Restart your phone and the Bluetooth device.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- App not working -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#app-mobile">
                                <div class="icon-container">
                                    <i class="fa-solid fa-mobile-screen"></i>
                                </div>
                                <h3>App Not Working</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="app-mobile">
                                <ol class="steps-list">
                                    <li>Restart the app.</li>
                                    <li>Check for app updates in the store.</li>
                                    <li>Restart your phone.</li>
                                    <li>Clear cache or reinstall the app.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        <!-- LAPTOP/DESKTOP GUIDES -->
        {% elif device_type == 'laptop' %}
            <div class="guide-section how-to-section" id="how-to">
                <div class="row">
                    <!-- Example: How to Install a Program -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#install-program">
                                <div class="icon-container">
                                    <i class="fa-solid fa-download"></i>
                                </div>
                                <h3>How to Install a Program</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="install-program">
                                <ol class="steps-list">
                                    <li>Download the program from its official website.</li>
                                    <li>Open the downloaded file (.exe for Windows, .dmg for Mac).</li>
                                    <li>Follow the installation instructions.</li>
                                    <li>Open the program from the Start menu (Windows) or Applications (Mac).</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- How to use Facebook -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#facebook-guide">
                                <div class="icon-container">
                                    <i class="fa-brands fa-facebook"></i>
                                </div>
                                <h3>How to Use Facebook</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="facebook-guide">
                                <ol class="steps-list">
                                    <li>Open a web browser and go to <strong>www.facebook.com</strong>.</li>
                                    <li>Log in with your email/phone and password.</li>
                                    <li>Explore your news feed, post updates, and connect with friends.</li>
                                    <li>Click the down arrow at the top right to log out when done.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- How to Search Online -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#google-guide">
                                <div class="icon-container">
                                    <i class="fa-brands fa-google"></i>
                                </div>
                                <h3>How to Search Online</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="google-guide">
                                <ol class="steps-list">
                                    <li>Open a web browser and go to <strong>www.google.com</strong>.</li>
                                    <li>Type your search terms and press Enter.</li>
                                    <li>Click on any result to open the page.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="guide-section troubleshoot-section d-none" id="troubleshoot">
                <div class="row">
                    <!-- Won’t Turn On -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#not-turning-on">
                                <div class="icon-container">
                                    <i class="fa-solid fa-power-off"></i>
                                </div>
                                <h3>Laptop/Desktop Won’t Turn On</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="not-turning-on">
                                <ol class="steps-list">
                                    <li>Check that the device is plugged in and the charging light is on (laptop), or that all cables are secure (desktop).</li>
                                    <li>Try a hard reset: hold power button for 10-15 seconds, then turn on again.</li>
                                    <li>If the screen is black, check display connections and brightness.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Running Slow -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#slow-computer">
                                <div class="icon-container">
                                    <i class="fa-solid fa-gauge-simple"></i>
                                </div>
                                <h3>Computer is Running Slow</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="slow-computer">
                                <ol class="steps-list">
                                    <li>Restart your computer.</li>
                                    <li>Close unnecessary programs (use Task Manager or Force Quit).</li>
                                    <li>Free up disk space (Disk Cleanup or About This Mac &gt; Storage).</li>
                                    <li>Scan for viruses and malware.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Won’t Connect to Wi-Fi -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#wifi-trouble">
                                <div class="icon-container">
                                    <i class="fa-solid fa-wifi"></i>
                                </div>
                                <h3>Won’t Connect to Wi-Fi</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="wifi-trouble">
                                <ol class="steps-list">
                                    <li>Restart the router and your computer.</li>
                                    <li>Check Wi-Fi settings and reconnect to your network.</li>
                                    <li>Update Wi-Fi drivers (Device Manager or Mac Software Update).</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Screen Flickering -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#screen-flicker">
                                <div class="icon-container">
                                    <i class="fa-solid fa-desktop"></i>
                                </div>
                                <h3>Screen Flickering or Glitching</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="screen-flicker">
                                <ol class="steps-list">
                                    <li>Restart your computer.</li>
                                    <li>Check for software and graphics driver updates.</li>
                                    <li>Test with an external monitor to check for hardware issues.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Frozen Computer -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#frozen-pc">
                                <div class="icon-container">
                                    <i class="fa-solid fa-triangle-exclamation"></i>
                                </div>
                                <h3>Computer is Not Responding (Frozen)</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="frozen-pc">
                                <ol class="steps-list">
                                    <li>Try closing the frozen program using Task Manager (Ctrl+Alt+Del) or Force Quit (Cmd+Option+Esc).</li>
                                    <li>Force a restart if necessary by holding the power button.</li>
                                    <li>Check for system updates.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Noisy Computer -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#noisy-computer">
                                <div class="icon-container">
                                    <i class="fa-solid fa-volume-high"></i>
                                </div>
                                <h3>Computer Is Making Strange Noises</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="noisy-computer">
                                <ol class="steps-list">
                                    <li>Check for dust in fans and clean gently with compressed air.</li>
                                    <li>Close unused programs.</li>
                                    <li>Check hard drive health using system tools.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Keyboard/Mouse Not Working -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#keyboard-mouse">
                                <div class="icon-container">
                                    <i class="fa-solid fa-keyboard"></i>
                                </div>
                                <h3>Keyboard or Mouse Not Working</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="keyboard-mouse">
                                <ol class="steps-list">
                                    <li>Check connections or batteries (for wireless devices).</li>
                                    <li>Restart the computer.</li>
                                    <li>Update drivers in Device Manager or System Preferences.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Display Too Dim -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#dim-display">
                                <div class="icon-container">
                                    <i class="fa-solid fa-sun"></i>
                                </div>
                                <h3>Display Is Too Dim</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="dim-display">
                                <ol class="steps-list">
                                    <li>Adjust brightness using keyboard keys or monitor controls.</li>
                                    <li>Check power settings and system preferences.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        <!-- TV GUIDES -->
        {% elif device_type == 'tv' %}
            <div class="guide-section how-to-section" id="how-to">
                <div class="row">
                    <!-- Set up TV -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#setup-tv">
                                <div class="icon-container">
                                    <i class="fa-solid fa-tv"></i>
                                </div>
                                <h3>Set Up a New TV</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="setup-tv">
                                <ol class="steps-list">
                                    <li>Unbox and place the TV on a stable surface.</li>
                                    <li>Connect the power cable and switch it on.</li>
                                    <li>Follow the on-screen setup steps.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Connect to Wi-Fi -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#tv-wifi">
                                <div class="icon-container">
                                    <i class="fa-solid fa-wifi"></i>
                                </div>
                                <h3>Connect TV to Wi-Fi</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="tv-wifi">
                                <ol class="steps-list">
                                    <li>Press the <strong>Menu</strong> button on your remote.</li>
                                    <li>Go to <strong>Network Settings</strong> &gt; <strong>Wi-Fi</strong>.</li>
                                    <li>Select your network and enter the password.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="guide-section troubleshoot-section d-none" id="troubleshoot">
                <div class="row">
                    <!-- No Signal -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#no-signal">
                                <div class="icon-container">
                                    <i class="fa-solid fa-plug"></i>
                                </div>
                                <h3>No Signal Message</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="no-signal">
                                <ol class="steps-list">
                                    <li>Check that cables are properly plugged in.</li>
                                    <li>Select the correct input/source using your remote.</li>
                                    <li>Restart the TV and the connected device.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- TV Won't Turn On -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#tv-wont-on">
                                <div class="icon-container">
                                    <i class="fa-solid fa-power-off"></i>
                                </div>
                                <h3>TV Won’t Turn On</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="tv-wont-on">
                                <ol class="steps-list">
                                    <li>Ensure the TV is plugged in and power switch is on.</li>
                                    <li>Try a different power socket or cable.</li>
                                    <li>Check for indicator lights; if none, TV may need repair.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        <!-- ROUTER GUIDES -->
        {% elif device_type == 'router' %}
            <div class="guide-section how-to-section" id="how-to">
                <div class="row">
                    <!-- Set Up Router -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#setup-router">
                                <div class="icon-container">
                                    <i class="fa-solid fa-router"></i>
                                </div>
                                <h3>Set Up a New Router</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="setup-router">
                                <ol class="steps-list">
                                    <li>Plug the router into a power outlet.</li>
                                    <li>Connect it to your modem with an Ethernet cable.</li>
                                    <li>Use your phone or computer to connect to the router's Wi-Fi.</li>
                                    <li>Follow the setup instructions in the manual or web portal.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Change Wi-Fi Password -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#change-password">
                                <div class="icon-container">
                                    <i class="fa-solid fa-key"></i>
                                </div>
                                <h3>Change Wi-Fi Password</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="change-password">
                                <ol class="steps-list">
                                    <li>Log in to the router's admin panel (check the label for the address, usually <strong>192.168.0.1</strong> or <strong>192.168.1.1</strong>).</li>
                                    <li>Find <strong>Wireless Settings</strong> and update the Wi-Fi password.</li>
                                    <li>Save changes and reconnect your devices.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="guide-section troubleshoot-section d-none" id="troubleshoot">
                <div class="row">
                    <!-- No Internet -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#no-internet">
                                <div class="icon-container">
                                    <i class="fa-solid fa-globe"></i>
                                </div>
                                <h3>No Internet Connection</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="no-internet">
                                <ol class="steps-list">
                                    <li>Restart the router and modem.</li>
                                    <li>Check cables and connections.</li>
                                    <li>Contact your internet provider if the issue persists.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Forgotten Wi-Fi Password -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#forgot-password">
                                <div class="icon-container">
                                    <i class="fa-solid fa-key"></i>
                                </div>
                                <h3>Forgotten Wi-Fi Password</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="forgot-password">
                                <ol class="steps-list">
                                    <li>Log in to the router’s admin panel.</li>
                                    <li>View or reset the Wi-Fi password in Wireless Settings.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        <!-- SMART METER GUIDES -->
        {% elif device_type == 'smartmeter' %}
            <div class="guide-section how-to-section" id="how-to">
                <div class="row">
                    <!-- Read Your Smart Meter -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#read-meter">
                                <div class="icon-container">
                                    <i class="fa-solid fa-bolt"></i>
                                </div>
                                <h3>Read Your Smart Meter</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="read-meter">
                                <ol class="steps-list">
                                    <li>Press the button on your smart meter to wake up the display.</li>
                                    <li>The current reading should appear on the screen.</li>
                                    <li>Record the numbers, including zeros, from left to right.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Understand Usage -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#usage-guide">
                                <div class="icon-container">
                                    <i class="fa-solid fa-chart-line"></i>
                                </div>
                                <h3>Understand Your Usage</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="usage-guide">
                                <ol class="steps-list">
                                    <li>Navigate through the menu to find daily or weekly usage statistics.</li>
                                    <li>Use the information to monitor energy/water usage and save money.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="guide-section troubleshoot-section d-none" id="troubleshoot">
                <div class="row">
                    <!-- Meter Not Working -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#meter-not-working">
                                <div class="icon-container">
                                    <i class="fa-solid fa-exclamation-triangle"></i>
                                </div>
                                <h3>Meter Not Working</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="meter-not-working">
                                <ol class="steps-list">
                                    <li>Check that the meter has power and display is on.</li>
                                    <li>If the display is blank, try pressing any button.</li>
                                    <li>Contact your provider if it still doesn't work.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Reading Seems Wrong -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#wrong-reading">
                                <div class="icon-container">
                                    <i class="fa-solid fa-question"></i>
                                </div>
                                <h3>Reading Seems Wrong</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="wrong-reading">
                                <ol class="steps-list">
                                    <li>Compare with last week’s reading to see if there’s a big jump.</li>
                                    <li>Call your supplier for help if readings seem inaccurate.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        <!-- PRINTER GUIDES -->
        {% elif device_type == 'printer' %}
            <div class="guide-section how-to-section" id="how-to">
                <div class="row">
                    <!-- Connect Printer to Wi-Fi -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#printer-wifi">
                                <div class="icon-container">
                                    <i class="fa-solid fa-wifi"></i>
                                </div>
                                <h3>Connect Printer to Wi-Fi</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="printer-wifi">
                                <ol class="steps-list">
                                    <li>On the printer, go to Network or Wi-Fi settings.</li>
                                    <li>Select your Wi-Fi network and enter the password.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Install Ink Cartridges -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#ink-printer">
                                <div class="icon-container">
                                    <i class="fa-solid fa-droplet"></i>
                                </div>
                                <h3>Install Ink Cartridges</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="ink-printer">
                                <ol class="steps-list">
                                    <li>Open the printer cover or ink access door.</li>
                                    <li>Remove empty cartridge(s).</li>
                                    <li>Insert new cartridge(s) and close the cover.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="guide-section troubleshoot-section d-none" id="troubleshoot">
                <div class="row">
                    <!-- Printer Won't Print -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#not-printing">
                                <div class="icon-container">
                                    <i class="fa-solid fa-triangle-exclamation"></i>
                                </div>
                                <h3>Printer Won’t Print</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="not-printing">
                                <ol class="steps-list">
                                    <li>Check if the printer is turned on and connected to Wi-Fi or cable.</li>
                                    <li>Check for any error messages on the printer display.</li>
                                    <li>Restart both your printer and computer.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <!-- Paper Jam -->
                    <div class="col-md-6 mb-4">
                        <div class="guide-card shadow-sm">
                            <div class="guide-card-header" data-bs-toggle="collapse" data-bs-target="#paper-jam">
                                <div class="icon-container">
                                    <i class="fa-solid fa-file-lines"></i>
                                </div>
                                <h3>Fix a Paper Jam</h3>
                                <i class="fa-solid fa-chevron-down toggle-icon"></i>
                            </div>
                            <div class="guide-card-body collapse" id="paper-jam">
                                <ol class="steps-list">
                                    <li>Turn off the printer.</li>
                                    <li>Gently remove any jammed paper.</li>
                                    <li>Check inside all access doors for extra paper.</li>
                                    <li>Turn the printer back on and try printing again.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        {% else %}
            <!-- Placeholder for devices still in development -->
            <div class="row">
                <div class="col-12 text-center py-5">
                    <h2>We're still working on guides for this device.</h2>
                    <p class="mb-4">Please check back soon or try another device category.</p>
                    <a href="{% url 'technicalissues' %}" class="btn btn-primary">
                        View all devices
                    </a>
                </div>
            </div>
        {% endif %}
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const toggleButtons = document.querySelectorAll('.toggle-btn');
        toggleButtons.forEach(button => {
            button.addEventListener('click', function() {
                toggleButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                const targetId = this.getAttribute('data-target');
                document.querySelectorAll('.guide-section').forEach(section => {
                    section.classList.add('d-none');
                });
                document.getElementById(targetId).classList.remove('d-none');
                // Move the toggle indicator
                const indicator = document.querySelector('.toggle-indicator');
                if (targetId === 'how-to') {
                    indicator.style.transform = 'translateX(0)';
                } else {
                    indicator.style.transform = 'translateX(100%)';
                }
            });
        });
        const guideHeaders = document.querySelectorAll('.guide-card-header');
        guideHeaders.forEach(header => {
            header.addEventListener('click', function() {
                const icon = this.querySelector('.toggle-icon');
                icon.classList.toggle('rotated');
            });
        });
    });
</script>
{% endblock %}
